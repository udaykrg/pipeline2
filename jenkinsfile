pipeline {
  agent none
  stages {
    stage ('build') {
    parallel {
       steps {
          sh '''
                  echo "this is build stage"
                  sleep 2
             '''
             }
    }
    stage ('deploy') {
    agent { label "java" }
       steps {
          sh '''
                  echo "this is deploy stage"
                  sleep 2
             '''
             }
    }
    stage ('deploy') {
     agent { label "master" }
       steps {
          sh '''
                  echo "this is deploy stage"
                  sleep 2
             '''
             }
    }
    stage ('test') {
    agent { label "master" }
       steps {
          sh '''
                  echo "this is test stage"
                  sleep 2
             '''
             }
    }
  }
}
